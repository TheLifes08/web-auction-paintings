"use strict";function openUpdateForm(a){$.get("/storage/paintings/"+a).done(function(a){a&&($("#update-painting-form-title").val(a.title),$("#update-painting-form-author").val(a.author),$("#update-painting-form-start-price").val(a.startPrice),$("#update-painting-form-min-step").val(a.minimalPriceStep),$("#update-painting-form-max-step").val(a.maximumPriceStep),$("#update-painting-form-desc").val(a.description),$("#update-painting-form-placed").prop("checked",a.placedOnAuction),$("#modal-update-painting").css("display","block"))})}function checkUpdateForm(){var a=$("#update-painting-form-title").val(),t=$("#update-painting-form-author").val(),e=$("#update-painting-form-start-price").val(),i=$("#update-painting-form-min-step").val(),n=$("#update-painting-form-max-step").val(),p=$("#update-painting-form-desc").val(),r=$("#update-painting-form-file")[0].files[0],s=!0;r&&(["image/png","image/jpeg"].includes(r.type)||(s=!1)),""!==a&&""!==t&&""!==p||(s=!1),(s=e<=0||i<=0||n<=0||n<i?!1:s)?$("#update-painting-form-submit").removeClass("w3-disabled"):$("#update-painting-form-submit").addClass("w3-disabled"),$("#update-painting-form-submit").prop("disabled",!s)}function closeUpdateForm(){$("#modal-update-painting").css("display","none"),$("#update-painting-form-message").css("display","none")}function updateData(a){$.get("/storage/paintings/"+a).done(function(a){a&&($("#painting-title").text(a.title),$("#painting-author").text(a.author),$("#painting-start-price").text(a.startPrice),$("#painting-min-step").text(a.minimalPriceStep),$("#painting-max-step").text(a.maximumPriceStep),$("#painting-desc").text(a.description),$("#painting-placed").text(a.placedOnAuction?"Да":"Нет"))})}function updatePainting(t){var a=$("#update-painting-form-title").val(),e=$("#update-painting-form-author").val(),i=$("#update-painting-form-start-price").val(),n=$("#update-painting-form-min-step").val(),p=$("#update-painting-form-max-step").val(),r=$("#update-painting-form-desc").val(),s=$("#update-painting-form-placed").is(":checked");$.ajax({url:"/storage/paintings/",type:"PUT",data:{id:t,title:a,author:e,startPrice:i,minimalPriceStep:n,maximumPriceStep:p,description:r,placedOnAuction:s},success:function(a){a&&(showMessage(a.message,a.error),a.error||updateData(t))}});r=$("#update-painting-form-file")[0].files[0];r&&((s=new FormData).append("id",t),s.append("file",r),$.ajax({url:"/storage/images/",type:"PUT",data:s,processData:!1,contentType:!1,enctype:"multipart/form-data",success:function(a){a&&!a.error&&$("#painting-image").prop("src","/public/images/paintings/"+a.filename+"?"+Math.random())}}))}function showMessage(a,t){var e=$("#update-painting-form-message");$("#update-painting-form-message-p").text(a),t?(e.addClass("w3-red"),e.removeClass("w3-green")):(e.addClass("w3-green"),e.removeClass("w3-red")),e.css("display","block")}