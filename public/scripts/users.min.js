"use strict";function _createForOfIteratorHelper(e,r){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=_unsupportedIterableToArray(e))||r&&e&&"number"==typeof e.length){a&&(e=a);var t=0,r=function(){};return{s:r,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,n=!0,s=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return n=e.done,e},e:function(e){s=!0,o=e},f:function(){try{n||null==a.return||a.return()}finally{if(s)throw o}}}}function _unsupportedIterableToArray(e,r){if(e){if("string"==typeof e)return _arrayLikeToArray(e,r);var a=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(a="Object"===a&&e.constructor?e.constructor.name:a)||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(e,r):void 0}}function _arrayLikeToArray(e,r){(null==r||r>e.length)&&(r=e.length);for(var a=0,t=new Array(r);a<r;a++)t[a]=e[a];return t}function updateTable(){$.get("/storage/users").done(function(e){if(e){var r=$("#users-table-body");r.empty();var a,t=_createForOfIteratorHelper(e);try{for(t.s();!(a=t.n()).done;){var o=a.value,n=createUsersTableRow(o);r.append(n)}}catch(e){t.e(e)}finally{t.f()}}})}function openUpdateForm(e){$.get("/storage/users/"+e).done(function(a){a&&($("#update-user-form-balance").val(a.balance),$("#update-user-form-participate").prop("checked",a.participate),$("#update-user-form-submit").off("click"),$("#update-user-form-submit").on("click",function(){var e=$("#update-user-form-balance").val(),r=$("#update-user-form-participate").is(":checked");updateUser({id:a.id,balance:e,participate:r})}),$("#modal-update-user").css("display","block"))})}function checkUpdateForm(){var e=0<=$("#update-user-form-balance").val();e?$("#update-user-form-submit").removeClass("w3-disabled"):$("#update-user-form-submit").addClass("w3-disabled"),$("#update-user-form-submit").prop("disabled",!e)}function closeUpdateForm(){$("#modal-update-user").css("display","none"),$("#update-user-form-message").css("display","none")}function updateUser(e){$.ajax({url:"/storage/users/",type:"PUT",data:e,success:function(e){e&&(showMessage(e.message,e.error),e.error||updateTable())}})}function showMessage(e,r){var a=$("#update-user-form-message");$("#update-user-form-message-p").text(e),r?(a.addClass("w3-red"),a.removeClass("w3-green")):(a.addClass("w3-green"),a.removeClass("w3-red")),a.css("display","block")}$(document).ready(function(){updateTable(),$("#update-user-form-message-close").on("click",function(){$("#update-user-form-message").css("display","none")})});